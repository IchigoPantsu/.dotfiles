
#[[plugins]]
#repo = 'Shougo/dein.vim'

[[plugins]]
repo = 'Shougo/vimproc.vim'
build = 'make'

#[[plugins]]
#repo ='Shougo/defx.nvim'

#[[plugins]]
#repo = 'kristijanhusak/defx-icons' 
#depends = ['Shougo/defx.nvim']

#[[plugins]]
#repo = 'kristijanhusak/defx-git' 
#depends = ['Shougo/defx.nvim']



###よく使われているvimのプラグイン top20
##https://qiita.com/reireias/items/5364dcaada1a5b88a206#1%E4%BD%8D-tpopevim-fugitive

[[plugins]]
repo = 'tpope/vim-fugitive'

[[plugins]]
repo = 'tpope/vim-surround'

[[plugins]]
repo = 'airblade/vim-gitgutter'
hook_add ='''
"let g:gitgutter_highlight_lines = 1
set updatetime=100
'''

#[[plugins]]
#repo = 'w0rp/ale'

[[plugins]]
repo = 'tpope/vim-repeat'

[[plugins]]
repo = 'junegunn/fzf'
build = './install --all'
hook_add = 'set rtp+=/usr/local/opt/fzf'
merged = '0'

[[plugins]]
repo = 'junegunn/fzf.vim'
depends = ['junegunn/fzf']
hook_add = '''
"" Mapping selecting mappings
" nmap <leader><tab> <plug>(fzf-maps-n)
" xmap <leader><tab> <plug>(fzf-maps-x)
" omap <leader><tab> <plug>(fzf-maps-o)

" Insert mode completion
imap <c-x><c-k> <plug>(fzf-complete-word)
imap <c-x><c-f> <plug>(fzf-complete-path)

"inoremap <expr> <c-x><c-f> fzf#vim#complete#path('fd')
"inoremap <expr> <c-x><c-f> fzf#vim#complete#path('rg --files')

imap <c-x><c-j> <plug>(fzf-complete-file-ag)
imap <c-x><c-l> <plug>(fzf-complete-line)

" Path completion with custom source command
inoremap <expr> <c-x><c-f> fzf#vim#complete#path('fd')
inoremap <expr> <c-x><c-f> fzf#vim#complete#path('rg --files')

" Word completion with custom spec with popup layout option
inoremap <expr> <c-x><c-k> fzf#vim#complete#word({'window': { 'width': 0.2, 'height': 0.9, 'xoffset': 1 }})

" Replace the default dictionary completion with fzf-based fuzzy completion
inoremap <expr> <c-x><c-k> fzf#vim#complete('cat /usr/share/dict/words')

" Global line completion (not just open buffers. ripgrep required.)
inoremap <expr> <c-x><c-l> fzf#vim#complete(fzf#wrap({
  \ 'prefix': '^.*$',
  \ 'source': 'rg -n ^ --color always',
  \ 'options': '--ansi --delimiter : --nth 3..',
  \ 'reducer': { lines -> join(split(lines[0], ':\zs')[2:], '') }}))

"function! s:make_sentence(lines)
"  return substitute(join(a:lines), '^.', '\=toupper(submatch(0))', '').'.'
"endfunction

"" inoremap <expr> <c-x><c-s> fzf#vim#complete({
"  \ 'source':  'cat /usr/share/dict/words',
"  \ 'reducer': function('<sid>make_sentence'),
"  \ 'options': '--multi --reverse --margin 15%,0',
"  \ 'left':    20})

" fzfによるCUI生活の改善
" https://blog.nijohando.jp/post/fzf-fish-vim/
nnoremap [Fzf] <Nop>
nmap <Leader><Leader> [Fzf]
nnoremap [Fzf]f :<C-u>Files ./<CR>
nnoremap [Fzf]F :<C-u>Files ~<CR>
nnoremap [Fzf]g :<C-u>GFiles<CR>
nnoremap [Fzf]G :<C-u>GFiles?<CR>
nnoremap [Fzf]b :<C-u>Buffers<CR>
nnoremap [Fzf]h :<C-u>History<CR>
" オレオレセッティング
nnoremap [Fzf]a :<C-u>Ag<CR>
nnoremap [Fzf]r :<C-u>Rg<CR>
nnoremap [Fzf]C :<C-u>Commands<CR>
nnoremap [Fzf]l :<C-u>Lines<CR>

" 画面分割
" nnoremap <C-v> <C-w>v<C-w>l:<C-u>Files<CR>
" nnoremap <C-s> <C-w>s<C-w>j:<C-u>Files<CR>

" Tab
" nnoremap <silent> <S-Tab> :tabnew<CR>
'''

#[[plugins]]
#repo = 'gfanto/fzf-lsp.nvim'
#depends = ['junegunn/fzf','junegunn/fzf.vim']

[[plugins]]
repo = 'antoinemadec/coc-fzf'
depends = ['junegunn/fzf','junegunn/fzf.vim','neoclide/coc.nvim']
hook_add ='''
" mappings
nnoremap [Fzf] <Nop>
nmap <Leader><Leader> [Fzf]
nnoremap [Fzf]cl       :<C-u>CocFzfList<CR>
nnoremap [Fzf]cd       :<C-u>CocFzfList diagnostics<CR>
nnoremap [Fzf]cD       :<C-u>CocFzfList diagnostics --current-buf<CR>
nnoremap [Fzf]cc       :<C-u>CocFzfList commands<CR>
nnoremap [Fzf]ce       :<C-u>CocFzfList extensions<CR>
nnoremap [Fzf]cL       :<C-u>CocFzfList location<CR>
nnoremap [Fzf]co       :<C-u>CocFzfList outline<CR>
nnoremap [Fzf]cs       :<C-u>CocFzfList symbols<CR>
nnoremap [Fzf]cp       :<C-u>CocFzfListResume<CR>
'''
#[[plugins]]
#repo = 'pbogut/fzf-mru.vim'
#depends = ['junegunn/fzf','junegunn/fzf.vim','neoclide/coc.nvim']

# debug
# depend on python3 provider
# type: pip3 install pynvim
[[plugins]]
repo = 'puremourning/vimspector'
on_ft = ["c","cpp","go","rust","python","javascript"]
build = './install_gadget.py --all --force-enable-rust --disable-tcl'
hook_add ='''
let g:vimspector_enable_mappings = 'VISUAL_STUDIO'

nmap <leader>ds :call vimspector#Launch()<CR>	
"nmap <leader>dc <Plug>VimspectorContinue	
"nmap <leader>dS <Plug>VimspectorStop
"nmap <leader>dR <Plug>VimpectorRestart
"nmap <leader>dP <Plug>VimspectorPause
nmap <leader>b <Plug>VimspectorToggleBreakpoint
"nmap <Plug>VimspectorToggleConditionalBreakpoint
"nmap <Plug>VimspectorAddFunctionBreakpoint
nmap <leader>dr <Plug>VimspectorRunToCursor
"nmap <Plug>VimspectorStepOver
"nmap <Plug>VimspectorStepInto
"nmap <Plug>VimspectorStepOut
"nmap <expr><CR> exists("g:_vimspector_session") ? <Plug>VimspectorBalloonEval : <CR>
"xmap <expr><CR> _vimspector_session ? <Plug>VimspectorBalloonEval : <CR>

function! s:my_cr()
  try
    <Plug>VimspectorBalloonEval
  catch
    <CR>
  endtry
endfunction
nmap <CR> :call my_cr() <CR>
'''

[[plugins]]
repo = 'vim-airline/vim-airline'

[[plugins]]
repo = 'vim-airline/vim-airline-themes'
depends = ['vim-airline/vim-airline']

#[[plugins]]
#repo = 'glepnir/spaceline.vim'
# Use the icon plugin for better behavior
#[[plugins]]
#repo = 'ryanoasis/vim-devicons' 
[[plugins]]
repo = 'kyazdani42/nvim-web-devicons'

[[plugins]]
repo = 'sheerun/vim-polyglot'

#[[plugins]]
#repo = 'SirVer/ultisnips'

[[plugins]]
repo = 'jiangmiao/auto-pairs'



###オレ的vimプラグイン10選
###https://qiita.com/reireias/items/beaa3bb0e299ae934217

# [[plugins]]
# repo = 'dhruvasagar/vim-table-mode'

#[[plugins]]
#repo = 'ryanoasis/vim-devicons'

[[plugins]]
repo = 'thinca/vim-quickrun'
hook_add = 'set splitbelow'

#[[plugins]]
#repo = 'mattn/sonictemplate-vim'

###gすすめプラグイン 〜 Vimはいいぞ！ゴリラと学ぶVim講座(7)
###https://knowledge.sakura.ad.jp/23248/

# [[plugins]]
# repo = 'previm/previm'

[[plugins]]
repo = 'vim-jp/vimdoc-ja'

# [[plugins]]
# repo = 'markonm/traces.vim'

# [[plugins]]
# repo = 'skanehira/translate.vim'

# [[plugin]]
# repo = '/tomasr/molokai'
# hook_add = '''
# syntax on
# colorscheme molokai
# set t_Co=256
# '''

[[plugins]]
repo = 'kana/vim-operator-user'
[[plugins]]
repo = 'kana/vim-operator-replace'
depends = ['kana/vim-operator-user']

#kana/vim-textobj-user/wiki
#https://github.com/kana/vim-textobj-user/wiki
[[plugins]]
repo = 'kana/vim-textobj-user'

#al/il for the current line
[[plugins]]
repo = 'kana/vim-textobj-line'

#ae/ie for the entire region of the current buffer
[[plugins]]
repo = 'kana/vim-textobj-entire'

#af/if and aF/iF for a function / extensible for any language
[[plugins]]
repo = 'kana/vim-textobj-indent'

#ay/iy for a syntax-highlighted item
[[plugins]]
repo = 'kana/vim-textobj-syntax'

#adh/idh and others for various elements in diff(1) output
[[plugins]]
repo = 'kana/vim-textobj-diff'

#af{char}/if{char} for a region between {char}s
[[plugins]]
repo = 'thinca/vim-textobj-between'

#ac/ic for a comment
[[plugins]]
repo = 'thinca/vim-textobj-comment'

#ap/ip for next file path (w/o basename), aP/iP for the previous file path (w/o basename)
[[plugins]]
repo = 'paulhybryant/vim-textobj-path'

#au/iu for a URL
[[plugins]]
repo ='mattn/vim-textobj-url'

# isb/asb for the closest region between any of () [] or {}.
[[plugins]]
repo ='osyo-manga/vim-textobj-multiblock'

#av/iv for a region between either _s or camelCaseVariables
[[plugins]]
repo = 'Julian/vim-textobj-variable-segment'

#aT/iT for "top level" blocks of code in arbitrary programming language
[[plugins]]
repo = 'adolenc/vim-textobj-toplevel'



### Vimの生産性を高める12の方法
# https://postd.cc/how-to-boost-your-vim-productivity/ 
# [[plugins]]
# repo = 'terryma/vim-expand-region'
# hook_add = '''
# 
# " Default settings. (NOTE: Remove comments in dictionary before sourcing)
# let g:expand_region_text_objects = {
#       \ "iw" :0,
#       \ "iW" :0,
#       \ "isb" :1,
#       \ "asb" :1,
#       \ "il" :0,
#       \ "ii" :1,
#       \ "ai" :1,
#       \ }
# 
# " vmap v <Plug>(expand_region_expand)
# " vmap <C-v> <Plug>(expand_region_shrink)
# '''



# clever-f.vim でカーソルの横移動を便利にする
# https://rhysd.hatenablog.com/entry/2013/09/17/220837
[[plugins]]
repo = 'rhysd/clever-f.vim'
hook_add = '''
let g:clever_f_ignore_case = 1
let g:clever_f_smart_case = 1
'''



# Vimの縦移動を強化する
# https://qiita.com/uji_/items/5cc267d6a96c417a29ef
[[plugins]]
repo = 'andymass/vim-matchup'
hook_add = 'let g:loaded_matchit = 1'



# 僕の推し Vimプラグインを見て！
# https://aiya000.github.io/Maid/vimconf.swp.2018/#/
[[plugins]]
repo = 'LeafCage/foldCC'

[[plugins]]
repo = 'machakann/vim-highlightedyank'

#[[plugins]]
#repo = 'nathanaelkane/vim-indent-guides'



# 僕がVimで愛用しているプラグイン30連発
# https://liginc.co.jp/469142
#[[plugins]]
#repo = 'https://github.com/ervandew/supertab'

[[plugins]]
repo = 'easymotion/vim-easymotion'
hook_add = '''
let g:EasyMotion_do_mapping = 0
"map <Leader> <Plug>(easymotion-prefix)

" Gif config
map  / <Plug>(easymotion-sn)
omap / <Plug>(easymotion-tn)

" These `n` & `N` mappings are options. You do not have to map `n` & `N` to EasyMotion.
" Without these mappings, `n` & `N` works fine. (These mappings just provide
" different highlight method and have some other features )
"map n <Plug>(easymotion-next)
"map N <Plug>(easymotion-prev)

"let g:EasyMotion_use_migemo = 0
let g:EasyMotion_enter_jump_first = 1
let g:EasyMotion_add_search_history = 1

"map <Leader>l <Plug>(easymotion-lineforward)
"map <Leader>j <Plug>(easymotion-j)
"map <Leader>k <Plug>(easymotion-k)
"map <Leader>h <Plug>(easymotion-linebackward)
let g:EasyMotion_startofline = 0 " keep cursor column when JK motion

'''

[[plugins]]
repo = 'simeji/winresizer'
hook_add = '''
" If you want to start window resize mode by `Ctrl+T`
let g:winresizer_start_key = '<C-r>'
" change keycode_mode 101(e) <-> 114(r)
let g:winresizer_keycode_mode = 114 
let g:winresizer_keycode_resize = 101
'''

#[[plugins]]
#repo = 'yuttie/comfortable-motion.vim'


# Vim Bootstrap 基本プラグイン
# https://qiita.com/uyo/items/2f8f1d6173b7ee0c0fac
[[plugins]]
repo = 'Yggdroot/indentLine'

# [[plugins]]
# repo = 'majutsushi/tagbar'

# ### completion lint tools by language-server-protocol
# [[plugins]]
# repo = 'prabirshrestha/async.vim'
# [[plugins]]
# repo = 'prabirshrestha/vim-lsp'
# hook_add = '''
# nmap gD <Plug>(lsp-peek-definition)
# vmap gD <Plug>(lsp-peek-definition)
# nmap gd <Plug>(lsp-definition)
# vmap gD <Plug>(lsp-definition)
# 
# nmap gC <Plug>(lsp-peek-declaration)
# vmap gC <Plug>(lsp-peek-declaration)
# nmap gc <Plug>(lsp-declaration)
# vmap gc <Plug>(lsp-declaration)
# 
# nmap gT <Plug>(lsp-peek-type-definition)
# vmap gT <Plug>(lsp-peek-type-definition)
# nmap gt <Plug>(lsp-type-definition)
# vmap gt <Plug>(lsp-type-definition)
# 
# nmap gI <Plug>(lsp-peek-implementation)
# vmap gI <Plug>(lsp-peek-implementation)
# nmap gi <Plug>(lsp-implementation)
# vmap gi <Plug>(lsp-implementation)
# 
# "nmap ge <Plug>(lsp-next-error)
# "vmap ge <Plug>(lsp-next-error)
# "nmap gE <Plug>(lsp-previous-error)
# "vmap gE <Plug>(lsp-previous-error)
# 
# nmap gw <Plug>(lsp-next-diagnostic)
# vmap gw <Plug>(lsp-next-diagnostic)
# nmap gW <Plug>(lsp-previous-diagnostic)
# vmap gW <Plug>(lsp-previous-diagnostic)
# 
# let g:lsp_log_file = ''
# let g:lsp_log_verbose = 0
# 
# " https://dev.to/moniquelive/haskell-lsp-bonus-for-vim-4nlj
# " vim-lsp-settings won't detect hls automatically as of today (2020-10-26). Let's teach it:
# if (executable('haskell-language-server-wrapper'))
#   au User lsp_setup call lsp#register_server({
#       \ 'name': 'haskell-language-server-wrapper',
#       \ 'cmd': {server_info->['haskell-language-server-wrapper', '--lsp']},
#       \ 'whitelist': ['haskell'],
#       \ })
# endif
# 
# " My Mappings
# function! s:on_lsp_buffer_enabled() abort
#     setlocal omnifunc=lsp#complete
#     setlocal signcolumn=yes
#     if exists('+tagfunc') | setlocal tagfunc=lsp#tagfunc | endif
#     nmap <buffer> gd <plug>(lsp-definition)
#     nmap <buffer> gr <plug>(lsp-references)
#     nmap <buffer> gf <plug>(lsp-code-action)
#     nmap <buffer> gi <plug>(lsp-implementation)
#     nmap <buffer> gt <plug>(lsp-type-definition)
#     nmap <buffer> <F2> <plug>(lsp-rename)
#     nmap <buffer> [g <Plug>(lsp-previous-diagnostic)
#     nmap <buffer> ]g <Plug>(lsp-next-diagnostic)
#     nmap <buffer> K <plug>(lsp-hover)
#     xmap <buffer> f <plug>(lsp-document-range-format)
#     nmap <buffer> <F5> <plug>(lsp-code-lens)
# 
#     " buffer format on save
#     " autocmd BufWritePre <buffer> LspDocumentFormatSync
# endfunction
# 
#   " Decorations
# augroup lsp_install
#     au!
#     let g:lsp_signs_enabled = 1         " enable signs
#     let g:lsp_diagnostics_echo_cursor = 1 " enable echo under cursor when in normal mode
#     let g:lsp_signs_error = {'text': '✗'}
#     " let g:lsp_signs_warning = {'text': '‼', 'icon': '/path/to/some/icon'} " icons require GUI
#     " let g:lsp_signs_hint = {'icon': '/path/to/some/other/icon'} " icons require GUI
#     let g:lsp_signs_warning = {'text': '‼'}
#     let g:lsp_highlight_references_enabled = 1
#     highlight link LspErrorText GruvboxRedSign " requires gruvbox
#     highlight clear LspWarningLine
#     " highlight lspReference ctermfg=red guifg=red ctermbg=green guibg=green
#     highlight lspReference guibg=#303010
# 
#     " call s:on_lsp_buffer_enabled only for languages that has the server registered.
#     autocmd User lsp_buffer_enabled call s:on_lsp_buffer_enabled()
# augroup END
# 
# '''
# [[plugins]]
# repo = 'mattn/vim-lsp-settings'
# merged = '0'
# hook_add = '''
# "let g:lsp_settings = {
# "\  'clangd': {'cmd': ['clangd-6.0']},
# "\  'efm-langserver': {'disabled': v:false}
# "\}
# '''
# [[plugins]]
# repo = 'mattn/vim-lsp-icons'
# [[plugins]]
# repo = 'mattn/efm-langserver'
# 
# 
# [[plugins]]
# repo = 'prabirshrestha/asyncomplete.vim'
# hook_add = '''
# "inoremap <expr> <Tab>   pumvisible() ? "\<C-n>" : "\<Tab>"
# "inoremap <expr> <S-Tab> pumvisible() ? "\<C-p>" : "\<S-Tab>"
# inoremap <expr> <cr>    pumvisible() ? "\<C-y>" : "\<cr>"
# 
# let g:asyncomplete_auto_popup = 0
# function! s:check_back_space() abort
#     let col = col('.') - 1
#     return !col || getline('.')[col - 1]  =~ '\s'
# endfunction
# 
# inoremap <silent><expr> <TAB>
# "  \ pumvisible() ? "\<C-n>" :
#   \ <SID>check_back_space() ? "\<TAB>" :
#   \ asyncomplete#force_refresh()
# " inoremap <expr><S-TAB> pumvisible() ? "\<C-p>" : "\<C-h>"
# 
# " オレオレセッティング
# let g:asyncomplete_auto_completeopt = 0
# 
# " Vimの補完を他エディタやIDEのような挙動にするようにする 
# " https://note.com/yasukotelin/n/na87dc604e042
# " 補完表示時のEnterで改行をしない
# inoremap <expr><CR>  pumvisible() ? "<C-y>" : "<CR>"
# set completeopt=menuone,noinsert
# inoremap <expr><C-n> pumvisible() ? "<Down>" : "<C-n>"
# inoremap <expr><C-p> pumvisible() ? "<Up>" : "<C-p>"
# 
# "オレオレセッティング
# inoremap <expr><esc> pumvisible() ? "<CR>" : "<esc>"
# '''
# [[plugins]]
# repo = 'prabirshrestha/asyncomplete-lsp.vim'
# 
# [[plugins]]
# repo = 'prabirshrestha/asyncomplete-file.vim'
# hook_add = '''
# au User asyncomplete_setup call asyncomplete#register_source(asyncomplete#sources#file#get_source_options({
#     \ 'name': 'file',
#     \ 'whitelist': ['*'],
#     \ 'priority': 10,
#     \ 'completor': function('asyncomplete#sources#file#completor')
#     \ }))
# '''
# 
# [[plugins]]
# repo = 'yami-beta/asyncomplete-omni.vim'
# hook_add = '''
# call asyncomplete#register_source(asyncomplete#sources#omni#get_source_options({
# \ 'name': 'omni',
# \ 'whitelist': ['*'],
# \ 'blacklist': [],
# \ 'completor': function('asyncomplete#sources#omni#completor')
# \  }))
# '''


#[[plugins]]
#repo='prabirshrestha/asyncomplete-neosnippet.vim'
#hook_add='''
#call asyncomplete#register_source(asyncomplete#sources#neosnippet#get_source_options({
#    \ 'name': 'neosnippet',
#    \ 'whitelist': ['*'],
#    \ 'completor': function('asyncomplete#sources#neosnippet#completor'),
#    \ }))
#imap <C-k>     <Plug>(neosnippet_expand_or_jump)
#smap <C-k>     <Plug>(neosnippet_expand_or_jump)
#xmap <C-k>     <Plug>(neosnippet_expand_target)
#'''

#w3m.vimで快適ブラウジング
#https://sites.google.com/site/hymd3a/vim/w3m-vim
#[[plugins]]
#repo = 'yuratomo/w3m.vim'
#hook_add = '''
#nnoremap <leader>w :W3mTab google 
#let g:w3m#external_browser = 'firefox'
#nnoremap <leader>E :W3mShowExtenalBrowser
#let g:w3m#hit_a_hint_key = 'f'
#'''

[[plugins]]
repo = 'pseewald/vim-anyfold'
hook_add = '''
filetype plugin indent on " required
syntax on                 " required
" activate for all filetypes
autocmd Filetype * AnyFoldActivate
" or
" activate for a specific filetype
"autocmd Filetype <your-filetype> AnyFoldActivate
" close all folds
" set foldlevel=0
" or
" Open all folds
 set foldlevel=99 
'''


[[plugins]]
repo = 'luochen1990/rainbow'
hook_add = '''
"set to 0 if you want to enable it later via :RainbowToggle
let g:rainbow_active = 1 
"nnoremap j [j
"nnoremap k ]k
'''

[[plugins]]
repo = 'arecarn/vim-fold-cycle'
hook_add = '''
"disable default mappings
let g:fold_cycle_default_mapping = 0 
" Won't close when max fold is opened
let g:fold_cycle_toggle_max_open  = 0
" Won't open when max fold is closed
let g:fold_cycle_toggle_max_close = 0
'''

[[plugins]]
repo = 'dominikduda/vim_current_word'
hook_add = '''
let g:vim_current_word#highlight_current_word = 0
'''

# [[plugins]]
# repo = 'lfilho/cosco.vim'
# hook_add '''
# let g:cosco_ignore_comment_lines = 1
# '''

# [[plugins]]
# repo = 'voldikss/vim-translator'
# hook_add = '''
# "let g:translator_target_lang = "ja"
# "let g:translator_default_engines = "google"

# """ Configuration example
# " Echo translation in the cmdline
# nmap <silent> <Leader>t <Plug>Translate
# vmap <silent> <Leader>t <Plug>TranslateV
# " Display translation in a window
# nmap <silent> <Leader>w <Plug>TranslateW
# vmap <silent> <Leader>w <Plug>TranslateWV
# " Replace the text with translation
# nmap <silent> <Leader>r <Plug>TranslateR
# vmap <silent> <Leader>r <Plug>TranslateRV
# " Translate the text in clipboard
# nmap <silent> <Leader>x <Plug>TranslateX
# '''


# vim・neovimでできるマークダウン　[リアルタイムプレビュー完備]
# https://qiita.com/Nedward/items/24a6c5aaec8c4fd86626
[[plugins]]
repo = 'plasticboy/vim-markdown'
hook_add = '''
let g:vim_markdown_conceal = 0
"let g:tex_conceal = ""
"let g:vim_markdown_math = 1
let g:vim_markdown_conceal_code_blocks = 0

'''

[[plugins]]
repo = 'IchigoPantsu/previm'
hook_add = '''
autocmd BufRead,BufNewFile *.md  set filetype=markdown
nnoremap <silent> <C-p> :PrevimOpen<CR>
let g:previm_open_cmd = 'xdg-open'
let g:vim_markdown_folding_disabled=1
let g:previm_enable_realtime=1
'''

[[plugins]]
repo = 'tyru/open-browser.vim'
hook_add = '''
" disable netrw's gx mapping.
let g:netrw_nogx = 1 
nmap gx <Plug>(openbrowser-smart-search)
vmap gx <Plug>(openbrowser-smart-search)
'''

[[plugins]]
repo = 'rafaqz/ranger.vim'
depends = ['rbgrouleff/bclose.vim']

# for renger-explorer.vim
[[plugins]]
repo = 'rbgrouleff/bclose.vim'

# [[plugins]]
# repo = 'adelarsq/vim-hackernews'

#for Regolith
#[[plugins]]
#repo = 'ayu-theme/ayu-vim'

#for manjaro_i3wm
#[[plugins]]
#repo = 'sainnhe/sonokai'

# [[plugins]]
# repo = 'glidenote/memolist.vim'
# hook_add = '''
# nnoremap <Leader>mn  :MemoNew<CR>
# nnoremap <Leader>ml  :MemoList<CR>
# nnoremap <Leader>mg  :MemoGrep<CR>
# let g:memoist_fzf = 1
# '''

# [[plugins]]
# repo = 'kana/vim-altercmd'
# hook_add = '''
# call altercmd#load()
# "AlterCommand greeting Greeting
# '''

[[plugins]]
repo = 'rhysd/accelerated-jk'
hook_add = '''
  nmap j <Plug>(accelerated_jk_gj)
  nmap k <Plug>(accelerated_jk_gk)
'''

# [[plugins]]
# repo = 'blindFS/vim-taskwarrior'
# hook_add = '''
# '''

[[plugins]]
repo = 'wellle/visual-split.vim'
hook_add = '''
xmap <C-W><C-r>  <Plug>(Visual-Split-VSResize)
xmap <C-W><C-s> <Plug>(Visual-Split-VSSplitAbove)
xmap <C-W><C-v> <Plug>(Visual-Split-VSSplitBelow)
xmap <C-W>r  <Plug>(Visual-Split-VSResize)
xmap <C-W>s <Plug>(Visual-Split-VSSplitAbove)
xmap <C-W>v <Plug>(Visual-Split-VSSplitBelow)
'''

[[plugins]]
repo = 'neoclide/coc.nvim'
rev = 'release'
merged = '0'
hook_add = '''
" [GitHub - neoclide/coc.nvim: Nodejs extension host for vim & neovim, load extensions like VSCode and host language servers.](https://github.com/neoclide/coc.nvim)

" Set internal encoding of vim, not needed on neovim, since coc.nvim using some
" unicode characters in the file autoload/float.vim
set encoding=utf-8

" TextEdit might fail if hidden is not set.
set hidden

" Some servers have issues with backup files, see #649.
set nobackup
set nowritebackup

" Give more space for displaying messages.
set cmdheight=2

" Having longer updatetime (default is 4000 ms = 4 s) leads to noticeable
" delays and poor user experience.
set updatetime=100

" Don't pass messages to |ins-completion-menu|.
set shortmess+=c

" Always show the signcolumn, otherwise it would shift the text each time
" diagnostics appear/become resolved.
if has("patch-8.1.1564")
  " Recently vim can merge signcolumn and number column into one
  set signcolumn=number
else
  set signcolumn=yes
endif

" Use tab for trigger completion with characters ahead and navigate.
" NOTE: Use command ':verbose imap <tab>' to make sure tab is not mapped by
" other plugin before putting this into your config.
inoremap <silent><expr> <TAB>
      \ pumvisible() ? "\<C-n>" :
      \ <SID>check_back_space() ? "\<TAB>" :
      \ coc#refresh()
inoremap <expr><S-TAB> pumvisible() ? "\<C-p>" : "\<C-h>"

function! s:check_back_space() abort
  let col = col('.') - 1
  return !col || getline('.')[col - 1]  =~# '\s'
endfunction

" Use <c-space> to trigger completion.
if has('nvim')
  inoremap <silent><expr> <c-space> coc#refresh()
else
  inoremap <silent><expr> <c-@> coc#refresh()
endif

" Make <CR> auto-select the first completion item and notify coc.nvim to
" format on enter, <cr> could be remapped by other vim plugin
inoremap <silent><expr> <cr> pumvisible() ? coc#_select_confirm()
                              \: "\<C-g>u\<CR>\<c-r>=coc#on_enter()\<CR>"

" Use `[g` and `]g` to navigate diagnostics
" Use `:CocDiagnostics` to get all diagnostics of current buffer in location list.
"nmap <silent> [g <Plug>(coc-diagnostic-prev)
"nmap <silent> ]g <Plug>(coc-diagnostic-next)
nmap <leader>h <Plug>(coc-diagnostic-prev)
nmap <leader>l <Plug>(coc-diagnostic-next)

" GoTo code navigation.
nmap <silent> gd <Plug>(coc-definition)
nmap <silent> gt <Plug>(coc-type-definition)
nmap <silent> gi <Plug>(coc-implementation)
nmap <silent> gr <Plug>(coc-references)

" Use K to show documentation in preview window.
nnoremap gk :call <SID>show_documentation()<CR>
" Use J to show documentation in preview window.
nnoremap gj <Plug>(coc-codeaction)

function! s:show_documentation()
  if (index(['vim','help'], &filetype) >= 0)
    execute 'h '.expand('<cword>')
  elseif (coc#rpc#ready())
    call CocActionAsync('doHover')
  else
    execute '!' . &keywordprg . " " . expand('<cword>')
  endif
endfunction

" Highlight the symbol and its references when holding the cursor.
autocmd CursorHold * silent call CocActionAsync('highlight')

" Symbol renaming.
nmap <leader>rn <Plug>(coc-rename)

" Formatting selected code.
xmap <leader>f  <Plug>(coc-format-selected)
nmap <leader>f  <Plug>(coc-format-selected)

augroup mygroup
  autocmd!
  " Setup formatexpr specified filetype(s).
  autocmd FileType typescript,json setl formatexpr=CocAction('formatSelected')
  " Update signature help on jump placeholder.
  autocmd User CocJumpPlaceholder call CocActionAsync('showSignatureHelp')
augroup end

" Applying codeAction to the selected region.
" Example: `<leader>aap` for current paragraph
xmap <leader>a  <Plug>(coc-codeaction-selected)
nmap <leader>a  <Plug>(coc-codeaction-selected)

" Remap keys for applying codeAction to the current buffer.
nmap <leader>ac  <Plug>(coc-codeaction)
" Apply AutoFix to problem on the current line.
nmap <leader>qf  <Plug>(coc-fix-current)

" Map function and class text objects
" NOTE: Requires 'textDocument.documentSymbol' support from the language server.
xmap if <Plug>(coc-funcobj-i)
omap if <Plug>(coc-funcobj-i)
xmap af <Plug>(coc-funcobj-a)
omap af <Plug>(coc-funcobj-a)
xmap ic <Plug>(coc-classobj-i)
omap ic <Plug>(coc-classobj-i)
xmap ac <Plug>(coc-classobj-a)
omap ac <Plug>(coc-classobj-a)

" Remap <C-f> and <C-b> for scroll float windows/popups.
if has('nvim-0.4.0') || has('patch-8.2.0750')
  nnoremap <silent><nowait><expr> <C-f> coc#float#has_scroll() ? coc#float#scroll(1) : "\<C-f>"
  nnoremap <silent><nowait><expr> <C-b> coc#float#has_scroll() ? coc#float#scroll(0) : "\<C-b>"
  inoremap <silent><nowait><expr> <C-f> coc#float#has_scroll() ? "\<c-r>=coc#float#scroll(1)\<cr>" : "\<Right>"
  inoremap <silent><nowait><expr> <C-b> coc#float#has_scroll() ? "\<c-r>=coc#float#scroll(0)\<cr>" : "\<Left>"
  vnoremap <silent><nowait><expr> <C-f> coc#float#has_scroll() ? coc#float#scroll(1) : "\<C-f>"
  vnoremap <silent><nowait><expr> <C-b> coc#float#has_scroll() ? coc#float#scroll(0) : "\<C-b>"
endif

" Use CTRL-S for selections ranges.
" Requires 'textDocument/selectionRange' support of language server.
nmap <silent> <C-s> <Plug>(coc-range-select)
xmap <silent> <C-s> <Plug>(coc-range-select)

" Add `:Format` command to format current buffer.
command! -nargs=0 Format :call CocAction('format')

" Add `:Fold` command to fold current buffer.
command! -nargs=? Fold :call     CocAction('fold', <f-args>)

" Add `:OR` command for organize imports of the current buffer.
command! -nargs=0 OR   :call     CocAction('runCommand', 'editor.action.organizeImport')

" Add (Neo)Vim's native statusline support.
" NOTE: Please see `:h coc-status` for integrations with external plugins that
" provide custom statusline: lightline.vim, vim-airline.
set statusline^=%{coc#status()}%{get(b:,'coc_current_function','')}

" Mappings for CoCList
" Show all diagnostics.
"nnoremap <silent><nowait> <space>a  :<C-u>CocList diagnostics<cr>
" Manage extensions.
"nnoremap <silent><nowait> <space>e  :<C-u>CocList extensions<cr>
" Show commands.
"nnoremap <silent><nowait> <space>c  :<C-u>CocList commands<cr>
" Find symbol of current document.
"nnoremap <silent><nowait> <space>o  :<C-u>CocList outline<cr>
" Search workspace symbols.
"nnoremap <silent><nowait> <space>s  :<C-u>CocList -I symbols<cr>
" Do default action for next item.
"nnoremap <silent><nowait> <space>j  :<C-u>CocNext<CR>
" Do default action for previous item.
"nnoremap <silent><nowait> <space>k  :<C-u>CocPrev<CR>
" Resume latest coc list.
"nnoremap <silent><nowait> <space>p  :<C-u>CocListResume<CR>

set pumblend=10

"let g:coc_global_extensions=['coc-cmake','coc-rust-analyzer']
'''

#[[plugin]]
#repo = 'https://github.com/dense-analysis/ale'
#'''
#let g:ale_linters = {'cs': ['OmniSharp']}
#'''

[[plugins]]
repo = 'OmniSharp/omnisharp-vim'
hook_add = '''
"for Unity
let g:OmniSharp_server_use_mono = 1
'''

#[[plugins]]
#repo = 'morhetz/gruvbox'

[[plugins]]
repo = 'glepnir/oceanic-material'

#[[plugins]]
#repo = 'norcalli/nvim-colorizer.lua'
#hook_add = '''
#lua require'colorizer'.setup()
#'''

### [Neovim LSP, DAP and Fuzzy Finder. Overview | by alpha2phi | The Startup | Jan, 2021 | Medium](https://medium.com/swlh/neovim-lsp-dap-and-fuzzy-finder-60337ef08060)

# LSP and Auto Completion Setup
#[[plugins]]
#repo = 'neovim/nvim-lspconfig'
#hook_add ='''
#" -------------------- LSP ---------------------------------
#:lua << EOF
#  local nvim_lsp = require('lspconfig')
#
#  local on_attach = function(client, bufnr)
#    require('completion').on_attach()
#
#    local function buf_set_keymap(...) vim.api.nvim_buf_set_keymap(bufnr, ...) end
#    local function buf_set_option(...) vim.api.nvim_buf_set_option(bufnr, ...) end
#
#    buf_set_option('omnifunc', 'v:lua.vim.lsp.omnifunc')
#
#    -- Mappings
#    local opts = { noremap=true, silent=true }
#    buf_set_keymap('n', 'gD', '<Cmd>lua vim.lsp.buf.declaration()<CR>', opts)
#    buf_set_keymap('n', 'gd', '<Cmd>lua vim.lsp.buf.definition()<CR>', opts)
#    buf_set_keymap('n', 'gi', '<cmd>lua vim.lsp.buf.implementation()<CR>', opts)
#    buf_set_keymap('n', 'gr', '<cmd>lua vim.lsp.buf.references()<CR>', opts)
#    
#    buf_set_keymap('n', '<space>k', '<Cmd>lua vim.lsp.buf.hover()<CR>', opts)
#    buf_set_keymap('n', '<space>K', '<cmd>lua vim.lsp.buf.signature_help()<CR>', opts)
#    buf_set_keymap('n', '<space>wa', '<cmd>lua vim.lsp.buf.add_workspace_folder()<CR>', opts)
#    buf_set_keymap('n', '<space>wr', '<cmd>lua vim.lsp.buf.remove_workspace_folder()<CR>', opts)
#    buf_set_keymap('n', '<space>wl', '<cmd>lua print(vim.inspect(vim.lsp.buf.list_workspace_folders()))<CR>', opts)
#    buf_set_keymap('n', '<space>D', '<cmd>lua vim.lsp.buf.type_definition()<CR>', opts)
#    buf_set_keymap('n', '<space>rn', '<cmd>lua vim.lsp.buf.rename()<CR>', opts)
#    buf_set_keymap('n', '<space>e', '<cmd>lua vim.lsp.diagnostic.show_line_diagnostics()<CR>', opts)
#    buf_set_keymap('n', '<space>q', '<cmd>lua vim.lsp.diagnostic.set_loclist()<CR>', opts)
#    
#    buf_set_keymap('n', '[d', '<cmd>lua vim.lsp.diagnostic.goto_prev()<CR>', opts)
#    buf_set_keymap('n', ']d', '<cmd>lua vim.lsp.diagnostic.goto_next()<CR>', opts)
#
#    -- Set some keybinds conditional on server capabilities
#    if client.resolved_capabilities.document_formatting then
#        buf_set_keymap("n", "<space>f", "<cmd>lua vim.lsp.buf.formatting()<CR>", opts)
#    elseif client.resolved_capabilities.document_range_formatting then
#        buf_set_keymap("n", "<space>f", "<cmd>lua vim.lsp.buf.formatting()<CR>", opts)
#    end
#
#    -- Set autocommands conditional on server_capabilities
#    if client.resolved_capabilities.document_highlight then
#        require('lspconfig').util.nvim_multiline_command [[
#        :hi LspReferenceRead cterm=bold ctermbg=red guibg=LightYellow
#        :hi LspReferenceText cterm=bold ctermbg=red guibg=LightYellow
#        :hi LspReferenceWrite cterm=bold ctermbg=red guibg=LightYellow
#        augroup lsp_document_highlight
#            autocmd!
#            autocmd CursorHold <buffer> lua vim.lsp.buf.document_highlight()
#            autocmd CursorMoved <buffer> lua vim.lsp.buf.clear_references()
#        augroup END
#        ]]
#    end
#  end
#
#  local servers = {'pyright', 'gopls', 'rust_analyzer'}
#  for _, lsp in ipairs(servers) do
#    nvim_lsp[lsp].setup {
#      on_attach = on_attach,
#    }
#  end
#EOF
#'''
#
#[[plugins]]
#repo = 'anott03/nvim-lspinstall'
#
#
#[[plugins]]
#repo = 'nvim-lua/completion-nvim'
#
#[[plugins]]
#repo = 'SirVer/ultisnips'
#hook_add ='''
#let g:completion_enable_snippet = 'UltiSnips'
#'''
#[[plugins]]
#repo = 'honza/vim-snippets'
#
#[[plugin]]
#repo = 'kosayoda/nvim-lightbulb'
#hook_add = '''
#autocmd CursorHold,CursorHoldI * lua require'nvim-lightbulb'.update_lightbulb()
#
#:lua << EOF
#-- Showing defaults
#require'nvim-lightbulb'.update_lightbulb {
#    sign = {
#        enabled = true,
#        -- Priority of the gutter sign
#        priority = 10,
#    },
#    float = {
#        enabled = false,
#        -- Text to show in the popup float
#        text = "💡",
#        -- Available keys for window options:
#        -- - height     of floating window
#        -- - width      of floating window
#        -- - wrap_at    character to wrap at for computing height
#        -- - max_width  maximal width of floating window
#        -- - max_height maximal height of floating window
#        -- - pad_left   number of columns to pad contents at left
#        -- - pad_right  number of columns to pad contents at right
#        -- - pad_top    number of lines to pad contents at top
#        -- - pad_bottom number of lines to pad contents at bottom
#        -- - offset_x   x-axis offset of the floating window
#        -- - offset_y   y-axis offset of the floating window
#        -- - anchor     corner of float to place at the cursor (NW, NE, SW, SE)
#        -- - winblend   transparency of the window (0-100)
#        win_opts = {},
#    },
#    virtual_text = {
#        enabled = false,
#        -- Text to show at virtual text
#        text = "💡",
#    }
#}
#EOF
#'''
#
#### async
#[[plugins]]
#repo = 'skywind3000/asynctasks.vim'
#[[plugins]]
#
#repo = 'skywind3000/asyncrun.vim'
#
## Fuzzy Finder using Telescope
# [[plugins]]
# repo = 'nvim-lua/popup.nvim'
# [[plugins]]
# repo = 'nvim-lua/plenary.nvim'
# [[plugins]]
# repo = 'nvim-telescope/telescope.nvim'
# hook_add ='''
# " Find files using Telescope command-line sugar.
# nnoremap <leader>ff <cmd>Telescope find_files<cr>
# nnoremap <leader>fg <cmd>Telescope live_grep<cr>
# nnoremap <leader>fb <cmd>Telescope buffers<cr>
# nnoremap <leader>fh <cmd>Telescope help_tags<cr>
# nnoremap <leader>fl <cmd>Telescope git_files<cr>
# 
# "Mapping <Esc> to quit in insert mode
# :lua << EOF
# local actions = require('telescope.actions')
# require('telescope').setup{
#   defaults = {
#     mappings = {
#       i = {
#         ["<esc>"] = actions.close
#       },
#     },
#   }
# }
# EOF
# '''
# 
# [[plugins]]
# repo = 'nvim-telescope/telescope-fzf-writer.nvim'
# hook_add = '''
# :lua << EOF
# require('telescope').setup {
#     extensions = {
#         fzf_writer = {
#             minimum_grep_characters = 2,
#             minimum_files_characters = 2,
# 
#             -- Disabled by default.
#             -- Will probably slow down some aspects of the sorter, but can make color highlights.
#             -- I will work on this more later.
#             use_highlighter = true,
#         }
#     }
# }
# EOF
# '''
# 
# [[plugins]]
# repo = 'nvim-telescope/telescope-dap.nvim'
# depends = ['mfussenegger/nvim-dap','nvim-treesitter/nvim-treesitter']
# 
# [[plugins]]
# repo = 'GustavoKatel/telescope-asynctasks.nvim'
#
# [[plugins]]
# repo = 'nvim-telescope/telescope-media-files.nvim'
# depends = ['nvim-lua/plenary.nvim','nvim-telescope/telescope.nvim']
# hook_add ='''
# :lua << EOF
# require('telescope').load_extension('media_files')
# require'telescope'.setup {
#   extensions = {
#     media_files = {
#      -- filetypes whitelist
#       -- defaults to {"png", "jpg", "mp4", "webm", "pdf"}
#       filetypes = {"png", "webp", "jpg", "jpeg"},
#       find_cmd = "rg" -- find command (defaults to `fd`)
#     }
#  },
# }
# EOF
# '''
#
## Better Syntax Highlighting using Tree-Sitter
#[[plugins]]
#repo = 'nvim-treesitter/nvim-treesitter'
#merge = 0
#hook_add ='''
#lua <<EOF
#require'nvim-treesitter.configs'.setup {
#  highlight = {
#    enable = true
#  },
#}
#EOF
#'''

## Debugging
#[[plugins]]
#repo = 'mfussenegger/nvim-dap'
#hook_add = '''
#nnoremap <silent> <F5> :lua require'dap'.continue()<CR>
#nnoremap <silent> <leader>dd :lua require('dap').continue()<CR>
#nnoremap <silent> <F10> :lua require'dap'.step_over()<CR>
#nnoremap <silent> <F11> :lua require'dap'.step_into()<CR>
#nnoremap <silent> <F12> :lua require'dap'.step_out()<CR>
#nnoremap <silent> <leader>b :lua require'dap'.toggle_breakpoint()<CR>
#nnoremap <silent> <leader>B :lua require'dap'.set_breakpoint(vim.fn.input('Breakpoint condition: '))<CR>
#nnoremap <silent> <leader>lp :lua require'dap'.set_breakpoint(nil, nil, vim.fn.input('Log point message: '))<CR>
#nnoremap <silent> <leader>dr :lua require'dap'.repl.open()<CR>
#nnoremap <silent> <leader>dl :lua require'dap'.repl.run_last()<CR>`
#nnoremap <silent> <leader>dn :lua require('dap-python').test_method()<CR>
#vnoremap <silent> <leader>ds <ESC>:lua require('dap-python').debug_selection()<CR>
#
#lua << EOF
#require('dap')
#vim.fn.sign_define('DapBreakpoint', {text='●', texthl='', linehl='', numhl=''})
#vim.fn.sign_define('DapStopped', {text='◎', texthl='', linehl='', numhl=''})
#local dap = require "dap"
#-- Modern LLVM installations come with a binary called lldb-vscode (or lldb-vscode-11). Use the same function as with vscode-cpptools and the following adapter configuration:
#
#dap.adapters.cpp = {
#  type = 'executable',
#  attach = {
#    pidProperty = "pid",
#    pidSelect = "ask"
#  },
#  command = 'lldb-vscode', -- my binary was called 'lldb-vscode-11'
#  env = {
#    LLDB_LAUNCH_FLAG_LAUNCH_IN_TTY = "YES"
#  },
#  name = "lldb"
#}
#
#dap.adapters.rust = {
#    type = 'executable',
#    attach = {
#        pidProperty = "pid",
#        pidSelect = "ask"
#    },
#    command = 'lldb-vscode', -- my binary was called 'lldb-vscode-11'
#    env = {
#        LLDB_LAUNCH_FLAG_LAUNCH_IN_TTY = "YES"
#    },
#    name = "lldb"
#}
#
#-- Now you should be able to debug a Rust or C/C++ binary (compiled with -g flag!) with a vim command :DebugC main "Hello World!" or :DebugRust target/debug/myrustprogram. :DebugC will remember your last target. So you can leave away the arguments when using it the second time.
#-- The first time you run it, the debug adapter will complain about a missing file nvim-dap.something. Just create this file. It is already there but has the name cppdbg.something.
#-- you should rename cppdbg.ad7Engine.json to nvim-dap.ad7Engine.json in 'extension/debugAdapters/bin'.
#
#vim.cmd [[
#  command! -complete=file -nargs=* DebugC lua require "my_debug".start_c_debugger({<f-args>}, "gdb")
#]]
#vim.cmd [[
#  command! -complete=file -nargs=* DebugRust lua require "my_debug".start_c_debugger({<f-args>}, "gdb", "rust-gdb")
#]]
#
#env = function()
#  local variables = {}
#  for k, v in pairs(vim.fn.environ()) do
#    table.insert(variables, string.format("%s=%s", k, v))
#  end
#  return variables
#end
#
#EOF

#[[plugins]]
#repo = 'mfussenegger/nvim-dap-python'
#depends = ['mfussenegger/nvim-dap','nvim-treesitter/nvim-treesitter']
#[[plugins]]
#repo = 'theHamsta/nvim-dap-virtual-text'
#depends = ['mfussenegger/nvim-dap','nvim-treesitter/nvim-treesitter']
# END debug

#[[plugins]]
#repo = 'nvim-treesitter/playground'

### for test
#[[plugins]]
#repo = 'roxma/vim-hug-neovim-rpc'

#[[plugins]]
#repo = 'roxma/vim-yarp'
#depends = ['roxma/vim-hug-neovim-rpc']

#[[plugins]]
#repo = 'janko/vim-test'

#[[plugins]]
#repo = 'rcarriga/vim-ultest'
#depends = ['roxma/vim-yarp','roxma/vim-hug-neovim-rpc','janko/vim-test']

# Integration with GitHub
#[[plugins]]
#repo = 'pwntester/octo.nvim'

